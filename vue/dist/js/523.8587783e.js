"use strict";(self["webpackChunkspringboot_vue_project"]=self["webpackChunkspringboot_vue_project"]||[]).push([[523],{6523:function(e,t,o){o.r(t),o.d(t,{default:function(){return x}});var r=o(6252),a=o(9963);const d={style:{width:"100%",height:"100vh",overflow:"hidden"}},i={style:{width:"400px",margin:"150px auto"}},l=(0,r._)("div",{style:{color:"black","font-size":"30px","font-family":"'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif","text-align":"center","padding-bottom":"30px"}}," 欢迎登录图书管理系统 ",-1),s={style:{display:"flex"}},n={style:{"text-align":"center"}},u=(0,r.Uk)("立即登录"),h={style:{"text-align":"center","padding-top":"10px"}},m=(0,r.Uk)("前往注册");function f(e,t,o,f,p,c){const g=(0,r.up)("el-input"),v=(0,r.up)("el-form-item"),C=(0,r.up)("ValidCode"),w=(0,r.up)("el-button"),y=(0,r.up)("el-form"),V=(0,r.up)("el-card");return(0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",i,[(0,r.Wm)(V,null,{default:(0,r.w5)((()=>[l,(0,r.Wm)(y,{ref:"form",model:p.form,rules:p.rules,onKeyup:(0,a.D2)(c.login,["enter","native"])},{default:(0,r.w5)((()=>[(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{"prefix-icon":"UserFilled",modelValue:p.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>p.form.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{"prefix-icon":"Lock",modelValue:p.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>p.form.password=e),type:"password",autocomplete:"off","show-password":"",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r.Wm)(g,{"prefix-icon":"Key",modelValue:p.form.validCode,"onUpdate:modelValue":t[2]||(t[2]=e=>p.form.validCode=e),style:{width:"50%"},placeholder:"请输入验证码"},null,8,["modelValue"]),(0,r.Wm)(C,{onInput:c.createValidCode,style:{"padding-left":"50px"},ref:"code"},null,8,["onInput"])])])),_:1}),(0,r._)("div",n,[(0,r.Wm)(w,{type:"primary",onClick:c.login,style:{width:"100%"}},{default:(0,r.w5)((()=>[u])),_:1},8,["onClick"])]),(0,r._)("div",h,[(0,r.Wm)(w,{type:"text",onClick:c.goToRegister,style:{width:"100%"}},{default:(0,r.w5)((()=>[m])),_:1},8,["onClick"])])])),_:1},8,["model","rules","onKeyup"])])),_:1})])])}var p=o(4471),c=o(3577);function g(e,t,o,a,d,i){return(0,r.wg)(),(0,r.iD)("div",{class:"ValidCode disabled-select",style:(0,c.j5)(`width: ${o.width}; height: ${o.height}`),onClick:t[0]||(t[0]=(...e)=>i.refreshValidCode&&i.refreshValidCode(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(d.codeList,((e,t)=>((0,r.wg)(),(0,r.iD)("span",{key:t,style:(0,c.j5)(i.getStyle(e))},(0,c.zw)(e.code),5)))),128))],4)}var v={name:"ValidCode",model:{prop:"value",event:"input"},props:{width:{type:String,default:"120px"},height:{type:String,default:"40px"},length:{type:Number,default:4},refresh:{type:Number}},data(){return{codeList:[]}},watch:{refresh(){this.createValidCode()}},mounted(){this.createValidCode()},methods:{createValidCode(){const e=this.length,t=[],o="ABCDEHGHIJKLMNOPQRSTUWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=o.length;for(let a=0;a<e;a++){const e=[Math.round(150*Math.random()),Math.round(150*Math.random()),Math.round(150*Math.random())];t.push({code:o.charAt(Math.floor(Math.random()*r)),color:`rgb(${e})`,fontSize:+[Math.floor(10*Math.random())]+10+10+"px",padding:`${[Math.floor(10*Math.random())]}px`,transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}this.codeList=t,this.$emit("input",t.map((e=>e.code)).join(""))},refreshValidCode(){this.createValidCode()},getStyle(e){return`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`}}};var C=o(3744);const w=(0,C.Z)(v,[["render",g],["__scopeId","data-v-c2e7a434"]]);var y=w,V={name:"Login",components:{ValidCode:y},data(){return{form:{},rules:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},validCode:""}},created(){sessionStorage.removeItem("user")},methods:{createValidCode(e){this.validCode=e},login(){this.$refs["form"].validate((e=>{if(e){if(!this.form.validCode)return this.$message.error("请填写验证码"),void this.$refs["code"].refreshValidCode();if(this.form.validCode.toLowerCase()!==this.validCode.toLowerCase())return this.$message.error("验证码错误"),void this.$refs["code"].refreshValidCode();p.Z.post("/user/login",this.form).then((e=>{"0"===e.code?(this.$message({type:"success",message:"登录成功！"}),sessionStorage.setItem("user",JSON.stringify(this.form)),this.$router.push("/home")):(this.$message({type:"error",message:e.msg}),this.$refs["code"].refreshValidCode())}))}}))},goToRegister(){this.$router.push("/register")}}};const $=(0,C.Z)(V,[["render",f]]);var x=$}}]);
//# sourceMappingURL=523.8587783e.js.map